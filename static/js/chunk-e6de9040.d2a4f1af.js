(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e6de9040"],{"50fc":function(e,t,a){"use strict";a.d(t,"d",(function(){return o})),a.d(t,"e",(function(){return s})),a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return l}));var r=a("b775");function o(e){return Object(r["a"])({url:"admin/getUserList",method:"post",data:e})}function s(e){return Object(r["a"])({url:"admin/resetPassword",method:"post",data:e})}function n(e){return Object(r["a"])({url:"admin/deleteUser",method:"post",data:e})}function i(e){return Object(r["a"])({url:"admin/addUser",method:"post",data:e})}function l(e){return Object(r["a"])({url:"admin/addHandle",method:"post",data:e})}},e378:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"box-card"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{clearable:""},model:{value:e.searchForm.username,callback:function(t){e.$set(e.searchForm,"username",t)},expression:"searchForm.username"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.getData}},[e._v("查询")]),a("el-button",{attrs:{type:"info"},on:{click:e.resultSearchTable}},[e._v("重置")])],1)],1),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",plain:""},on:{click:function(t){return e.changeVisible(!0)}}},[e._v("新增")])],1),a("el-divider",{attrs:{"content-position":"left"}},[e._v("数据信息")]),a("el-table",{ref:"userTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center",width:"55"}}),a("el-table-column",{attrs:{label:"姓名",prop:"userName",align:"center","min-width":"80"}}),a("el-table-column",{attrs:{label:"最后登录时间",prop:"loginTime",align:"center","min-width":"80"}}),a("el-table-column",{attrs:{label:"最后登录IP",prop:"loginIp",align:"center","min-width":"80"}}),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime",align:"center","min-width":"80"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.resetPassword(r.id)}}},[e._v(" 重置密码 ")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.deleteUser(r.id)}}},[e._v(" 删除 ")])]}}])})],1),a("el-pagination",{staticStyle:{float:"right"},attrs:{"current-page":e.searchForm.page,"page-sizes":[20,40,60,100],"page-size":e.searchForm.size,layout:"total, sizes, prev, pager, next, jumper",total:e.dataCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("add-dialog",{attrs:{visible:e.dialog},on:{"update:visible":function(t){e.dialog=t},changeVisible:e.changeVisible}})],1)},o=[],s=a("50fc"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"新增",visible:e.visible,"destroy-on-close":!0,"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"550px"},on:{"update:visible":function(t){e.visible=t},open:e.open}},[a("el-form",{ref:"infoForm",attrs:{model:e.form,rules:e.roles}},[a("el-form-item",{attrs:{label:"账号","label-width":e.formLabelWidth,prop:"username"}},[a("el-input",{attrs:{placeholder:"请输入内容",autocomplete:"off"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),a("el-form-item",{attrs:{label:"密码","label-width":e.formLabelWidth,prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入内容",autocomplete:"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),a("el-form-item",{attrs:{label:"确认密码","label-width":e.formLabelWidth,prop:"password2"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入内容",autocomplete:"off"},model:{value:e.form.password2,callback:function(t){e.$set(e.form,"password2",t)},expression:"form.password2"}})],1),a("el-form-item",{attrs:{label:"角色","label-width":e.formLabelWidth,prop:"role"}},[a("el-switch",{staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"管理员","active-value":"1","inactive-text":"普通用户","inactive-value":"2"},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.onClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)},i=[],l={props:{visible:{type:Boolean,default:!1}},data:function(){var e=this,t=function(t,a,r){e.form.password!==a?r(new Error("2次密码输入不一致！")):r()};return{form:{username:"",password:"",password2:"",role:"2"},formLabelWidth:"120px",roles:{username:[{required:!0,message:"字段必填",trigger:"blur"}],role:[{required:!0,message:"字段必填",trigger:"blur"}],password:[{required:!0,message:"字段必填",trigger:"blur"}],password2:[{required:!0,message:"字段必填",trigger:"blur"},{validator:t,trigger:"blur"}]},options:[],flag:!0}},methods:{open:function(){this.form={username:"",password:"",password2:""}},submit:function(){var e=this;this.$refs.infoForm.validate((function(t){t&&(Object(s["b"])(e.form).then((function(t){var a=t.code;200===a?e.$message.success("新增成功！"):e.$message.error("新增失败，请稍后重试！")})).catch((function(){e.$message.error("新增失败，请稍后重试！")})),setTimeout(e.onClose,1e3))}))},onClose:function(){this.$refs.infoForm.resetFields(),this.form={username:"",password:"",password2:""},this.$emit("changeVisible",!1)}}},c=l,u=a("2877"),d=Object(u["a"])(c,n,i,!1,null,null,null),m=d.exports,f={name:"Index",components:{AddDialog:m},data:function(){return{dialog:!1,searchForm:{page:1,size:20,username:""},tableData:[],selectedItem:{},dataCount:0}},mounted:function(){this.getData()},methods:{getData:function(){var e=this;this.tableData=[],this.dataCount=0,Object(s["d"])(this.searchForm).then((function(t){var a=t.code,r=t.data;200===a&&(e.tableData=r.content,e.dataCount=r.totalElements)}))},resultSearchTable:function(){this.searchForm={page:1,size:20,username:""},this.getData()},resetPassword:function(e){var t=this,a={id:e};Object(s["e"])(a).then((function(e){var a=e.code,r=e.msg;200===a?t.$message.success(r||"密码重置为【123456】"):t.$message.error("密码重置失败")}))},deleteUser:function(e){var t=this,a={id:e};this.$confirm("确定要删除这条数据吗？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["c"])(a).then((function(e){var a=e.code,r=e.message;200===a?(t.$message.success(r||"删除成功！"),t.getData()):t.$message.error(r||"删除失败！")})).catch((function(e){t.$message.error(e||"删除失败！")}))}))},handleSizeChange:function(e){this.searchForm.startpage=1,this.searchForm.pagesize=e,this.getData()},handleCurrentChange:function(e){this.searchForm.startpage=e,this.getData()},changeVisible:function(e){e||this.getData(),this.dialog=e}}},p=f,h=Object(u["a"])(p,r,o,!1,null,"9b37d578",null);t["default"]=h.exports}}]);